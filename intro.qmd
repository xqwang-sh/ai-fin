---
title: "课程简介与预备知识"
subtitle: "AI时代的金融研究范式"
---

# 课程概览与学习目标

本课程旨在帮助研究生系统掌握将**人工智能方法**应用于**金融实证研究**的完整工作流程。我们不仅关注技术工具的使用，更强调：

1. **严谨的科学方法论**：如何在金融场景中正确设计、评估和解释AI模型
2. **可复现的研究规范**：从数据处理到结果报告的完整证据链
3. **经济意义的检验**：确保统计显著性转化为实际的经济价值
4. **前沿技术的应用**：文本分析、多模态学习等现代AI方法在金融中的实践

## 课程结构

本课程共8周，分为两个阶段：

**第一阶段（第1-4周）：教师精讲**
- **第1周**：机器学习基础——i.i.d.场景下的认知框架
- **第2周**：资产定价中的ML应用——时序评估与回测规范
- **第3周**：金融文本分析——从原始文本到量化信号
- **第4周**：多模态模型——图像/音频/视频在金融中的应用

**第二阶段（第5-8周）：学生研究汇报与研讨**
- 分组汇报研究计划，课堂讨论与反馈
- 第5周前有**课前测验**（覆盖第1-4周核心概念）

# 日常使用AI的思维模式

## "老板与员工"的协作框架

在AI辅助的研究工作中，你需要建立一种**"老板委派任务、验收员工成果"**的思维模式：

::: {.callout-tip}
老板的职责（你的角色）

1. **明确目标**：清晰定义研究问题、数据范围、评估标准
2. **拆解任务**：将复杂问题分解为可执行的具体步骤
3. **质量把关**：验收AI生成的代码、分析结果，确保符合学术规范
4. **决策判断**：在多个技术方案间权衡，做出关键的研究决策
:::

::: {.callout-warning}
员工的角色（AI工具）

- 高效执行具体任务（数据清洗、模型训练、代码生成等）
- 提供技术建议和多种实现方案
- 快速迭代和试错
- **但不能替代你的领域知识、研究判断和责任担当**
:::

## 验收工作的关键原则

无论AI生成的代码看起来多么完美，你都必须做到：

1. **理解逻辑**：确保你理解每段代码的功能和数学原理
2. **检查输出**：验证数据维度、统计量、可视化结果是否合理
3. **测试边界**：用极端情况测试代码（如空数据、缺失值、异常值）
4. **溯源数据**：追溯数据来源、时间对齐、变量定义
5. **可复现性**：确保设置随机种子、记录环境、版本锁定

::: {.callout-important}
学术诚信提醒

AI工具可以辅助你**完成任务**，但不能替代你**理解和负责**。所有提交的研究成果，你都必须能够独立解释其原理、假设和局限性。
:::

# AI辅助编程：Coding Agent模式

## 为什么需要Coding Agent？

传统的"复制-粘贴式"AI辅助编程存在诸多问题：
- 代码片段缺乏上下文，难以整合到项目中
- 频繁在IDE和浏览器间切换，效率低下
- 难以处理多文件、跨模块的复杂任务

**Coding Agent模式**让AI直接在你的开发环境中工作，理解项目全貌，自动完成文件读写、代码编辑、终端操作等任务。

## 推荐工具链：VSCode + Cursor + Claude

我们推荐以下工具组合：

1. **Cursor IDE**（基于VSCode）
- 内置Claude Sonnet 4.5模型（目前最强的代码生成模型）
- 支持**Agent模式**：AI可以自主读取、编辑、创建文件
- 智能上下文管理（自动索引项目代码）

2. **Claude Code**（通过Cursor调用）
- 长上下文窗口（200k tokens）：可理解大型代码库
- 强大的代码理解和生成能力
- 支持多轮对话和迭代优化

3. **GLM-4（可选的补充）**
- 国产大模型，适合中文文档处理
- API成本较低，适合批量任务
- 可通过OpenAI兼容接口在Cursor中配置

## 核心Skills：让AI成为高效助手

### Skill 1: **Planning with Files**

在开始编码前，让AI帮你规划项目结构：

```markdown
@Composer 我需要构建一个股票收益率预测项目，请帮我：
1. 设计项目文件夹结构
2. 列出需要的主要模块和文件
3. 说明数据流和依赖关系
```

AI会生成类似这样的规划：

```
project/
├── data/
│   ├── raw/              # 原始数据（只读）
│   ├── processed/        # 处理后的数据
│   └── data_loader.py
├── features/
│   ├── technical.py      # 技术指标
│   └── fundamental.py    # 基本面特征
├── models/
│   ├── baseline.py
│   └── ml_models.py
├── evaluation/
│   ├── metrics.py
│   └── backtest.py
├── notebooks/
│   └── exploratory.ipynb
├── config.yaml           # 配置文件
├── requirements.txt
└── README.md
```

### Skill 2: **Superpowers模式**

启用"Superpowers"（超能力模式）让AI拥有更大的自主权：

- **自动文件导航**：AI可以主动搜索和打开相关文件
- **批量编辑**：同时修改多个文件中的相关代码
- **终端执行**：运行测试、安装依赖、查看结果
- **错误修复**：自动读取报错信息并修复

::: {.callout-tip}
如何开启Superpowers

在Cursor中使用`Ctrl+Shift+P`（Mac: `Cmd+Shift+P`），输入"Superpowers"切换模式。

或者在对话中明确要求：
```
@Composer 请使用superpowers模式帮我重构这个模块，
自动处理所有相关的导入和函数调用更新
```
:::

### Skill 3: **Context Management**（上下文管理）

有效管理AI的上下文窗口，确保它关注正确的信息：

**明确引用文件：**
```markdown
@data_loader.py @config.yaml 
请根据配置文件中的参数更新数据加载逻辑
```

**指定代码范围：**
```markdown
在 models/ml_models.py 的 50-100 行，
优化特征选择逻辑，避免数据泄露
```

**排除无关文件：**
```markdown
@Composer 重构评估模块，但不要修改 data/ 文件夹
```

### Skill 4: **Iterative Refinement**（迭代优化）

将复杂任务分解为多轮对话：

**第一轮：** 生成初始版本
```
实现一个滚动窗口回测函数，
输入是预测值和真实值的DataFrame
```

**第二轮：** 增加功能
```
在上面的回测函数中添加交易成本和延迟执行的考虑
```

**第三轮：** 优化和测试
```
添加单元测试，确保边界情况（如窗口小于5期）不会报错
```

### Skill 5: **Problem-Solving Workflow**（问题解决流程）

遇到错误时，让AI系统性地诊断和修复：

```markdown
@Composer 运行 backtest.py 时出现 KeyError: 'returns'

请按以下步骤调查：
1. 检查 data_loader.py 返回的列名
2. 确认 backtest.py 中对列名的假设
3. 修复不一致，并添加输入验证
4. 运行测试确认修复有效
```

# 实战演示：一个完整的工作流

让我们通过一个真实案例展示如何使用Coding Agent完成研究任务：

## 任务：构建基于BERT的财报情绪分析模型

**Step 1: 项目规划**
```markdown
@Composer 创建一个金融文本情绪分析项目：
- 使用FinBERT模型
- 数据：10-K年报的MD&A部分
- 评估：情绪得分与未来收益率的IC
- 需要处理：文本清洗、长文本截断、时间对齐
```

**Step 2: 数据处理**
```markdown
@data/raw/ 中有原始10-K的txt文件

请创建 preprocessing.py：
1. 提取MD&A section（用正则匹配section标题）
2. 清洗HTML标签和特殊字符
3. 按512 token切分长文本
4. 保存为 processed/mda_cleaned.csv
```

**Step 3: 模型构建**
```markdown
@preprocessing.py 

基于清洗后的数据，创建 model.py：
1. 加载 FinBERT（yiyanghkust/finbert-tone）
2. 批量推理，获取 positive/negative/neutral 概率
3. 计算复合情绪得分：pos - neg
4. 考虑GPU内存限制，使用batch_size=16
```

**Step 4: 评估与可视化**
```markdown
@model.py @data/returns.csv

创建 evaluation.py：
1. 将情绪得分与未来1个月收益率对齐（注意披露日期滞后）
2. 计算时序IC（按年度分组）
3. 生成可视化：IC时间序列图、分位数组合收益图
4. 输出结果到 results/evaluation_report.html
```

**Step 5: 稳健性检验**
```markdown
@evaluation.py

增加稳健性分析：
1. 不同情绪指标（pos-neg vs pos/(pos+neg)）
2. 行业中性化（去除行业平均情绪）
3. 控制公司规模和账面市值比
4. 样本外测试（2020年后的数据）
```

通过这种方式，AI可以在10-20分钟内完成一个初始版本的完整pipeline，而你只需专注于：

- **研究设计**：如何定义情绪？如何对齐时间？
- **质量验收**：检查每个步骤的输出是否合理
- **结果解释**：IC=0.05是否有经济意义？

# 学习资源与后续安排

## 必备软件安装

1. **Cursor IDE**: [https://cursor.sh](https://cursor.sh)（免费试用14天，之后$20/月）
2. **Python环境**: 建议使用Anaconda或Miniconda
3. **Git**: 用于版本控制和代码提交

## 推荐学习材料

- **Cursor官方文档**: [https://docs.cursor.sh](https://docs.cursor.sh)
- **Claude API文档**: [https://docs.anthropic.com](https://docs.anthropic.com)
- **FinBERT等金融NLP模型**: [Hugging Face Model Hub](https://huggingface.co/models)

## 课程要求

- 第1-4周课前需完成指定阅读（见讲义中每周的阅读清单）
- 第5周前完成**课前测验**（开卷，覆盖核心概念）
- 第5-8周每组准备**15分钟研究计划汇报**
- 期末提交**详细研究计划书**（Detailed Research Plan）

::: {.callout-note}
本周行动清单

1. [ ] 安装Cursor IDE并完成基础配置
2. [ ] 尝试使用Agent模式完成一个简单任务（如创建Python项目模板）
3. [ ] 阅读第1周必读材料：Hastie et al. (2009) Chapters 3, 7
4. [ ] 思考：你的研究方向如何与AI方法结合？
:::

接下来，我们将在**第1讲**深入学习机器学习的基础理论，建立i.i.d.场景下的完整认知框架。这是后续所有应用的理论基础，务必牢固掌握。
